# ****分发
更新时间: 2018-09-27

**0.一些变量**
```
# SVN_PULL_TIME=$(date '+%F')
# PRO_NAME=<项目名>
# PRO_PORT=<端口号>
# SERVER_IP_LIST=<要分发的服务ip列表>
```

**1.分发到服务器,导入镜像**
```
# for ip in ${SERVER_IP_LIST[@]}
do
  rsync -avz /data/images/ ${ip}:/data/images/
  ssh ${ip} "docker load -i /data/images/save_${PRO_NAME}_${SVN_PULL_TIME}.tar"
done
```

**2.启动,挂载日志目录**
```
# for ip in ${SERVER_IP_LIST[@]}
do
  ssh ${ip} "docker run --name ${PRO_NAME}_${SVN_PULL_TIME} --network host -h ${PRO_NAME} -p ${PRO_PORT}:${PRO_PORT}/tcp -v /data/project/${PRO_NAME}/logs/:/project/${PRO_NAME}/logs/:rw -d ${PRO_NAME}:${SVN_PULL_TIME} && docker logs -f ${PRO_NAME}_${SVN_PULL_TIME}"
done
```

